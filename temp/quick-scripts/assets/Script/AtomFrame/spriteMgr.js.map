{"version":3,"sources":["spriteMgr.js"],"names":["cc","Class","extends","Component","properties","TAG","ctor","console","log","altasBuff","spriteBuff","onLoad","onDestroy","loadSpriteWithUrl","remoteUrl","callback","callfunc","err","texture","message","Texture2D","sprite","SpriteFrame","setTexture","match","loader","load","url","type","addSpriteFrame","key","obj","addSpriteAtlas","SpriteAtlas","cleanSpriteFrame","cleanSpriteAtlas","getSpriteFrame","getAtlasSpriteFrame","altas","createSprite","spriteframe","node","Node","addComponent","Sprite","spriteFrame"],"mappings":"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","file":"spriteMgr.js","sourceRoot":"../../../../../assets/Script/AtomFrame","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        TAG: \"spriteMgr\",\n    },\n\n    ctor: function () {\n        console.log(\"-new:\" + this.TAG);\n        this.altasBuff = {};\n        this.spriteBuff = {};\n    },\n\n    onLoad: function () {\n        console.log(\"-load:\" + this.TAG);\n    },\n\n    onDestroy: function () {\n        console.log(\"-destory:\" + this.TAG);\n    },\n\n    //加载网络图片\n    loadSpriteWithUrl: function ( remoteUrl, callback){\n        if (remoteUrl != null){\n            const callfunc = function (err , texture) {\n                if(err){\n                    console.log(err.message || err, remoteUrl);\n                    callback ? callback(null, err) :null;\n                    return ;\n                }\n                if(texture instanceof cc.Texture2D){\n                    console.log(\"create spriteframe--\");\n                    var sprite = new cc.SpriteFrame();\n                    sprite.setTexture(texture);\n                    callback ? callback(sprite) :null ;\n                }else{\n                    callback ? callback(null,\"not a texture!\") :null;\n                }\n\n            }\n            //\n            if (remoteUrl.match(\".png\") == null){\n                cc.loader.load({ url: remoteUrl , type:\"png\" },callfunc);\n            }else{\n                cc.loader.load( remoteUrl , callfunc);\n            }\n        }\n    },\n\n    addSpriteFrame:function (key, obj) {\n        if (key == null || !obj instanceof cc.SpriteFrame){\n            console.log(\" -------- 类型异常 \", key)\n            return \n        }\n        this.spriteBuff[key] = obj;\n    },\n\n    addSpriteAtlas: function (key, obj) {\n        if (key == null || !obj instanceof cc.SpriteAtlas) {\n            console.log(\" -------- 类型异常 \", key)\n            return\n        }\n        this.altasBuff[key] = obj;\n    },\n\n    cleanSpriteFrame:function (key) {\n        this.spriteBuff[key] = null;\n    },\n\n    cleanSpriteAtlas: function (key) {\n        this.altasBuff[key] = null;\n    },\n\n    getSpriteFrame:function (key) {\n        if(key == null){\n            console.log(\" ------  key 不能为空\", key)\n            return \n        }\n        return this.spriteBuff[key];\n    },\n\n    getAtlasSpriteFrame: function (altas , key) {\n        if (altas ==null || key == null) {\n            console.log(\" ------ altas key 不能为空\", altas, key)\n            return \n        }\n        if (this.altasBuff[altas]){\n            return this.altasBuff[altas].getSpriteFrame(key);\n        }\n    },\n\n    createSprite: function (key) {\n        if(key ==null){\n            console.log(\" ------ 空的key\");\n            return \n        }\n        var spriteframe = this.spriteBuff[key];\n        if(spriteframe){\n            var node = new cc.Node();\n            var sprite = node.addComponent(cc.Sprite);\n            sprite.spriteFrame = spriteframe;\n            return node;\n        }\n    },\n\n    createSprite: function (altas, key) {\n        if (altas ==null || key == null) {\n            console.log(\" ------ 空的altas ,key\", altas, key)\n            return\n        }\n        var spriteframe = this.altasBuff[altas].getSpriteFrame(key);\n        if (spriteframe) {\n            var node = new cc.Node();\n            var sprite = node.addComponent(cc.Sprite);\n            sprite.spriteFrame = spriteframe;\n            return node;\n        }\n    }\n\n\n\n});"]}