{"version":3,"sources":["fileMgr.js"],"names":["cc","Class","extends","Component","properties","TAG","ctor","console","log","onLoad","onDestroy","readFileFromRes","path","callback","loader","loadRes","err","data","message","write2FileRes","sys","isNative","wpath","url","raw","jsb","fileUtils","writeStringToFile","writeObj2FileRes","obj","_data","JSON","stringify","readFile","_repath","match","fullPathForFileName","getStringFromFile","write2File","str_data","_path","getWritablePath","writeObj2File","writeToFile","name","fullPathForRelativeFile","isFileExist","isDirectoryExist","removeFile","removeDirectory","renameFile","oldname","newname"],"mappings":"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","file":"fileMgr.js","sourceRoot":"../../../../../assets/Script/AtomFrame","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        TAG: \"fileMgr\",\n    },\n\n    ctor: function () {\n        console.log(\"-new:\" + this.TAG);\n    },\n\n    onLoad: function () {\n        console.log(\"-load:\" + this.TAG);\n    },\n\n    onDestroy: function () {\n        console.log(\"-destory:\" + this.TAG);\n    },\n\n    /*  \n        文件的读写只支持native平台\n        提示文件不存在 or 下载失败，1 检查报错路径 ，2路径没问题时 检查resources 是不是两个 ，3检查资源的UUID ： 项目/library/uuid-to-mtime.json\n    */\n\n    /*  resources 的读写 */\n    readFileFromRes: function (path, callback) {\n        if (path == null) {\n            console.log(\" ------ 读取空的文件路径\")\n            return\n        }\n        cc.loader.loadRes(path, function (err, data) {\n            if (err) {\n                console.log(err.message || err)\n                return callback ? callback(null) : null\n            }\n\n            return callback ? callback(data) : null\n        })\n    },\n    write2FileRes: function (data , path) {\n        if (cc.sys.isNative) {\n            if (path == null || data == null) {\n                console.log(\" ------ 写入的内容路径不能为空\")\n                return\n            }\n            var wpath = cc.url.raw(path);\n            jsb.fileUtils.writeStringToFile(data, wpath)\n        }else{\n            console.log(\" ----- 不是原生客户端程序\")\n        }\n    },\n\n    writeObj2FileRes: function (obj, path) {\n        if (cc.sys.isNative) {\n            if (path == null || obj == null) {\n                console.log(\" ------ 写入的对象路径不能为空\")\n                return\n            }\n            if (typeof (obj) != \"Object\") {\n                console.log(\" ------ 你写入的不是一个对象。请用 write2FileRes\")\n            }\n            var wpath = cc.url.raw(path);\n            var _data = JSON.stringify(obj)\n            jsb.fileUtils.writeStringToFile(_data, wpath)\n        } else {\n            console.log(\" ----- 不是原生客户端程序\")\n        }\n    },\n\n    /* 程序自定义目录的读写 更多详细 API : http://cocos2d-x.org/docs/api-ref/js/v3x/symbols/jsb.fileUtils.html  */\n    readFile: function (path) {\n        if (path == null) {\n            console.log(\" ------ 读取空的文件路径\")\n            return\n        }\n        if (cc.sys.isNative) {\n            var _repath = path\n            if (_repath.match(\"/\") == null) {\n                _repath = this.fullPathForFileName(path) ; //jsb.fileUtils.getWritablePath() + path\n                console.log(\" ------ 读取文件 \", _repath)\n            }\n            return jsb.fileUtils.getStringFromFile(_repath)\n        }else{\n            console.log(\" ----- 不是原生客户端程序\")\n        }\n    },\n\n    write2File: function (str_data, path) {\n        if(cc.sys.isNative){\n            if (str_data == null || path ==null){\n                console.log(\" ------ 文件写入内容路径不能为空\", str_data, path)\n                return false;\n            }\n            var _path = path\n            if (_path.match(\"/\") == null){\n                _path = jsb.fileUtils.getWritablePath() + path\n                console.log(\" ------ 文件被存储到 writablePath \", _path)\n            }\n            return jsb.fileUtils.writeStringToFile(str_data, _path)\n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    writeObj2File: function (obj, path) {\n        if (cc.sys.isNative) {\n            if (obj == null || path == null) {\n                console.log(\" ------ 文件写入对象路径不能为空\", obj, path)\n                return false;\n            }\n            var _path = path\n            if (_path.match(\"/\") == null) {\n                _path = jsb.fileUtils.getWritablePath() + path\n                console.log(\" ------ 文件被存储到 writablePath \", _path)\n                return false;\n            }\n            return jsb.fileUtils.writeToFile(JSON.stringify(obj), _path)\n        } else {\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    fullPathForFileName: function (name) {\n        if(cc.sys.isNative){\n            return jsb.fileUtils.fullPathForFileName(name);\n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    fullPathForRelativeFile: function name(path,name) {\n        if(cc.sys.isNative){\n            return jsb.fileUtils.fullPathForRelativeFile(path, name)\n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    getWritablePath: function () {\n        if(cc.sys.isNative){\n            return jsb.fileUtils.getWritablePath();\n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    isFileExist: function (path) {\n        if(cc.sys.isNative){\n            return jsb.fileUtils.isFileExist(path);\n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    isDirectoryExist: function (path) {\n        if(cc.sys.isNative){\n            return jsb.fileUtils.isDirectoryExist(path);  \n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    removeFile: function (path) {\n        if(cc.sys.isNative){\n            return jsb.fileUtils.removeFile(path);\n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    removeDirectory: function (path) {\n        if(cc.sys.isNative){\n            if(this.isDirectoryExist(path)){\n                return jsb.fileUtils.removeDirectory(path);\n            }else{\n                console.log(\" ----- 目录不存在 无需删除\");\n                return true\n            }\n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n    renameFile: function (path , oldname , newname) {\n        if(cc.sys.isNative){\n            return jsb.fileUtils.renameFile(path, oldname, newname);\n        }else{\n            console.log(\" ------ 文件写操作需要在 设备上使用\")\n            return false;\n        }\n    },\n\n});\n"]}