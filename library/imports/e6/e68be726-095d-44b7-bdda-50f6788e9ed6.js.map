{"version":3,"sources":["../../../../../assets/Script/AtomFrame/assets/Script/AtomFrame/eventMgr.js"],"names":["cc","Class","extends","Component","properties","TAG","ctor","console","log","eventBuff","fezzedEventBuff","onLoad","onDestroy","listen","_eventName","_callfunc","_target","item","target","callfunc","push","unListenAllByKey","unListenByObj","key","hasOwnProperty","itemlist","index","length","element","splice","unListen","notify","data"],"mappings":"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","file":"eventMgr.js","sourceRoot":"../../../../../assets/Script/AtomFrame","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        TAG: \"eventMgr\",\n    },\n\n    ctor: function () {\n        console.log(\"-new:\" + this.TAG);\n        this.eventBuff = {};\n        this.fezzedEventBuff = {};\n    },\n\n    onLoad: function () {\n        console.log(\"-load:\" + this.TAG);\n    },\n\n    onDestroy: function () {\n        console.log(\"-destory:\" + this.TAG);\n    },\n\n    listen: function (_eventName , _callfunc , _target) {\n        if (this.eventBuff[_eventName] == null ){\n            this.eventBuff[_eventName] = []\n        }\n\n        var item = {}\n        item.target = _target;\n        item.callfunc = _callfunc;\n        this.eventBuff[_eventName].push(item)\n    },\n\n    unListenAllByKey: function (_eventName) {\n        this.eventBuff[_eventName] = null\n    },\n\n    unListenByObj: function (_target) {\n        for (var key in this.eventBuff) {\n            if (this.eventBuff.hasOwnProperty(key)) {\n                var itemlist = this.eventBuff[key];\n                //\n                if(itemlist != null){\n                    for (var index = itemlist.length - 1; index >= 0; index--) {\n                        var element = itemlist[index];\n                        if (element != null && element.target === _target) {\n                            itemlist.splice(index, 1);\n                        }\n                    }\n                }       \n            }\n        }\n    },\n\n    unListen: function (_eventName, _target) {\n        var itemlist = this.eventBuff[_eventName];\n        if(itemlist != null){\n            for (var index = 0; index < itemlist.length; index++) {\n                var element = itemlist[index];\n                if (element != null && element.target == _target) {\n                    itemlist.splice(index, 1);\n                    index--;\n                }\n            }\n        }\n    },\n\n    notify: function (_eventName , data) {\n        var itemlist = this.eventBuff[_eventName];\n        if (itemlist != null) {\n            for (var index = 0; index < itemlist.length; index++) {\n                var element = itemlist[index];\n                // console.log(\" -- the obj :\",element.target);\n                element.callfunc(element.target,data);\n            }\n        }else{\n            console.log(\"_event null : \",_eventName);\n        }\n    }\n \n    // setInfo: function (_key, _value) {\n    //     this.infoBuff.forEach(function (element) {\n    //         if (element.key == _key) {\n    //             element.vaule = _value;\n    //             return;\n    //         }\n    //     }, this);\n\n    //     console.log(\"add conf : key:\" + _key + \"  value: \" + _value)\n    //     var item = { key: _key, value: _value };\n    //     this.infoBuff.push(item);\n    // },\n\n    // getInfo: function (_key) {\n    //     var result = null;\n    //     this.infoBuff.forEach(function (element) {\n    //         if (element.key == _key) {//element.key.localeCompare(_key) == 0\n    //             result = element.value;\n    //             return;\n    //         }\n    //     }, this);\n    //     console.log(\" element velue  \" + result);\n    //     return result;\n    // },\n});\n"]}